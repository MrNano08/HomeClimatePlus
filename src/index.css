@import "tailwindcss";

/* ===== Temas: suave (default) y oscuro ===== */
:root,
:root[data-theme="suave"] {
  color-scheme: light;
  /* Página */
  --page-bg: linear-gradient(180deg, #f8fafc, #ffffff);
  --page-text: #0f172a;

  /* Header */
  --header-border: #e2e8f0;
  --header-bg: color-mix(in oklab, white 82%, transparent);

  /* Card */
  --card-border: color-mix(in oklab, #e2e8f0 70%, transparent);
  --card-bg: color-mix(in oklab, white 92%, transparent);

  /* Botones primarios */
  --primary-start: #0ea5e9; /* sky-500 */
  --primary-end:   #0284c7; /* sky-600 */
  --primary-border:#0284c7;
  --on-primary: #ffffff;

  /* Botón ghost */
  --ghost-border:   color-mix(in oklab, #e2e8f0 70%, transparent);
  --ghost-hover-bg: color-mix(in oklab, white 60%, transparent);

  /* Botón success */
  --success-start:  #10b981; /* emerald-500 */
  --success-end:    #059669; /* emerald-600 */
  --success-border: #059669;
  --on-success: #ffffff;

  /* Input */
  --input-border: color-mix(in oklab, #cbd5e1 70%, transparent);
  --input-bg:     color-mix(in oklab, white 96%, transparent);
  --input-focus:  rgba(14,165,233,.25); /* sky-500/25 */

  /* Badge */
  --badge-bg:    color-mix(in oklab, #e0f2fe 70%, transparent);
  --badge-text:  #0369a1;
  --badge-border:#bae6fd;

  /* Toast */
  --toast-bg:   color-mix(in oklab, #0f172a 92%, transparent);
  --toast-text: #ffffff;

  /* Icon */
  --icon-border:   color-mix(in oklab, #e2e8f0 70%, transparent);
  --icon-hover-bg: color-mix(in oklab, white 60%, transparent);
}

:root[data-theme="oscuro"] {
  color-scheme: dark;
  /* Página */
  --page-bg: linear-gradient(180deg, #0b1220, #0f172a);
  --page-text: #ffffff; /* blanco puro para contraste */

  /* Header */
  --header-border: #1f2937; /* slate-800 */
  --header-bg: color-mix(in oklab, #0f172a 70%, transparent);

  /* Card */
  --card-border: color-mix(in oklab, #334155 55%, transparent); /* slate-600 */
  --card-bg:     color-mix(in oklab, #0f172a 88%, transparent); /* slate-900 */

  /* Botones primarios (marca constante) */
  --primary-start: #0284c7; /* sky-600 */
  --primary-end:   #0ea5e9; /* sky-500 */
  --primary-border:#38bdf8; /* sky-400 */
  --on-primary: #ffffff;

  /* Ghost */
  --ghost-border:   color-mix(in oklab, #334155 60%, transparent);
  --ghost-hover-bg: color-mix(in oklab, #1f2937 60%, transparent);

  /* Success */
  --success-start:  #059669; /* emerald-600 */
  --success-end:    #10b981; /* emerald-500 */
  --success-border: #10b981;
  --on-success: #ffffff;

  /* Input */
  --input-border: color-mix(in oklab, #334155 60%, transparent);
  --input-bg:     color-mix(in oklab, #0b1220 90%, transparent);
  --input-focus:  rgba(56,189,248,.35); /* sky-400/35 */

  /* Badge */
  --badge-bg:    color-mix(in oklab, #0ea5e9 25%, transparent);
  --badge-text:  #7dd3fc; /* sky-300 */
  --badge-border:#0369a1; /* sky-700 */

  /* Toast */
  --toast-bg:   color-mix(in oklab, #020617 92%, transparent); /* slate-950 */
  --toast-text: #ffffff;

  /* Icon */
  --icon-border:   color-mix(in oklab, #334155 60%, transparent);
  --icon-hover-bg: color-mix(in oklab, #1f2937 60%, transparent);
}

@layer components {
  /* ====== PAGE (mejora visual para login/register) ====== */
  .hc-page {
    min-height: 100dvh;
    color: var(--page-text);
    background:
      radial-gradient(1100px 520px at 12% -8%, color-mix(in oklab, #e0f2fe 55%, transparent), transparent 60%),
      radial-gradient(900px 520px at 110% 20%, color-mix(in oklab, #dbeafe 55%, transparent), transparent 55%),
      var(--page-bg);
    position: relative;
    overflow: hidden;
  }
  .hc-page::after{
    content:"";
    position:absolute; inset:auto -7rem -7rem auto;
    width:22rem; height:22rem; border-radius:999px;
    background: radial-gradient(circle at 30% 30%, color-mix(in oklab,#93c5fd 55%, transparent), transparent 70%);
    filter: blur(14px);
    pointer-events:none;
  }

  /* ====== HEADER (glass) ====== */
  .hc-header {
    position: sticky; top: 0; z-index: 40;
    border-bottom: 1px solid var(--header-border);
    background: var(--header-bg);
    color: var(--page-text);
    -webkit-backdrop-filter: saturate(140%) blur(8px);
    backdrop-filter: saturate(140%) blur(8px);
  }

  /* ====== CARD (glass suave para auth) ====== */
  .hc-card {
    border-radius: 1rem; /* 2xl */
    border: 1px solid var(--card-border);
    background: color-mix(in oklab, var(--card-bg) 92%, transparent);
    color: var(--page-text);
    box-shadow: 0 10px 30px rgba(25, 60, 140, 0.10);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
    backdrop-filter: blur(10px) saturate(120%);
  }

  /* ====== BOTONES ====== */
  .hc-btn-primary {
    display: inline-flex; align-items: center; justify-content: center; gap: .5rem;
    border-radius: .875rem; padding: .8rem 1rem; font-size: .95rem; font-weight: 600;
    border: 1px solid var(--primary-border);
    background: linear-gradient(180deg, var(--primary-start), var(--primary-end));
    color: var(--on-primary);
    box-shadow: 0 8px 18px color-mix(in oklab, var(--primary-end) 35%, transparent);
    transition: transform .08s ease, box-shadow .2s ease, filter .2s ease, opacity .2s ease;
  }
  .hc-btn-primary:hover { box-shadow: 0 10px 22px color-mix(in oklab, var(--primary-end) 40%, transparent); filter: saturate(1.05); }
  .hc-btn-primary:active { transform: translateY(1px); }
  .hc-btn-primary[disabled]{ opacity:.65; filter:grayscale(.15); cursor:not-allowed; }

  .hc-btn-ghost {
    display: inline-flex; align-items: center; justify-content: center; gap: .5rem;
    border-radius: .75rem; padding: .5rem 1rem; font-size: .875rem; font-weight: 500;
    border: 1px solid var(--ghost-border);
    background: transparent; transition: background .2s ease;
    color: var(--page-text);
  }
  .hc-btn-ghost:hover { background: var(--ghost-hover-bg); }

  .hc-btn-success {
    display: inline-flex; align-items: center; justify-content: center; gap: .5rem;
    border-radius: .75rem; padding: .5rem 1rem; font-size: .875rem; font-weight: 500;
    border: 1px solid var(--success-border);
    background: linear-gradient(180deg, var(--success-start), var(--success-end));
    color: var(--on-success); transition: filter .2s ease;
  }
  .hc-btn-success:hover { filter: brightness(1.06); }

  /* ====== INPUTS (más cómodos y foco vistoso) ====== */
  .hc-input {
    width: 100%;
    border-radius: .875rem;
    border: 1px solid var(--input-border);
    padding: .8rem 0.9rem;
    font-size: .95rem;
    background: var(--input-bg);
    color: var(--page-text);
    box-shadow: inset 0 1px 0 rgba(15,23,42,.04);
    outline: none;
    transition: box-shadow .2s ease, border-color .2s ease, transform .05s ease;
  }
  .hc-input::placeholder { color: color-mix(in oklab, var(--page-text) 55%, transparent); }
  .hc-input:focus { border-color: var(--primary-start); box-shadow: 0 0 0 4px var(--input-focus); }
  .hc-input:active{ transform: translateY(0.5px); }

  /* ====== BADGE ====== */
  .hc-badge {
    display: inline-flex; align-items: center; gap: .25rem;
    border-radius: 9999px; padding: .125rem .625rem; font-size: .75rem;
    background: var(--badge-bg);
    color: var(--badge-text); border: 1px solid var(--badge-border);
  }

  /* ====== TOAST (centrado inferior) ====== */
  .hc-toast {
    position: fixed; left: 50%; transform: translateX(-50%);
    bottom: 1rem; z-index: 50;
    padding: .75rem 1rem; font-size: .9rem; border-radius: .875rem;
    background: var(--toast-bg); color: var(--toast-text);
    box-shadow: 0 12px 24px rgba(2,6,23,.45);
    max-width: 92vw; text-align: center;
  }

  /* ====== ICONO (volver / ojo password) ====== */
  .hc-icon {
    width: 2.25rem; height: 2.25rem; display: inline-grid; place-items: center;
    border-radius: .625rem; border: 1px solid var(--icon-border);
    background: color-mix(in oklab, #ffffff 96%, transparent);
    box-shadow: 0 4px 12px rgba(15,23,42,.06);
    transition: background .2s ease, transform .08s ease, box-shadow .2s ease;
    color: var(--page-text);
  }
  .hc-icon:hover { background: var(--icon-hover-bg); transform: translateY(-1px); box-shadow: 0 6px 14px rgba(15,23,42,.1); }
}

/* ===== Legibilidad en OSCURO: solo TEXTO (sin tocar bordes ni fondos) ===== */
@layer utilities {
  /* Variables de texto para oscuro */
  .dark { --hc-text-strong: #ffffff; --hc-text: #e5e7eb; --hc-text-dim: #cbd5e1; }

  /* Texto base en superficies */
  .dark .hc-page,
  .dark .hc-header,
  .dark .hc-card { color: var(--hc-text); }

  /* Títulos / negritas */
  .dark .hc-card h1,
  .dark .hc-card h2,
  .dark .hc-card h3,
  .dark .hc-card .font-bold { color: var(--hc-text-strong) !important; }

  /* Corrige utilidades Tailwind que dejan texto oscuro */
  .dark :where(.hc-page, .hc-header, .hc-card) :where(
    .text-slate-900, .text-slate-800, .text-slate-700,
    .text-gray-900, .text-gray-800, .text-gray-700
  ) { color: var(--hc-text) !important; }

  .dark :where(.hc-page, .hc-header, .hc-card) :where(
    .text-slate-600, .text-gray-600, .text-slate-500, .text-gray-500
  ) { color: var(--hc-text-dim) !important; }
}

/* === Legibilidad interior de tarjetas (claro/oscuro) ===================== */
/* Variables de texto interior */
:root,
:root[data-theme="suave"] { --card-fg: #0f172a; --muted-fg: #475569; }
:root[data-theme="oscuro"] { --card-fg: #e5e7eb; --muted-fg: #cbd5e1; }

/* Texto base e interiores coherentes */
.hc-card { color: var(--card-fg); }
.hc-card h1, .hc-card h2, .hc-card h3, .hc-card h4,
.hc-card strong, .hc-card .title { color: var(--card-fg); }

/* Párrafos, labels, descripciones */
.hc-card :where(p, small, label, span, li, .help, .subtitle, .caption) {
  color: var(--card-fg);
  opacity: .98;
}

/* Subtono (muted) */
.hc-card .muted,
.hc-card :where(.text-slate-500, .text-slate-600, .text-slate-700) {
  color: var(--muted-fg) !important;
  opacity: 1 !important;
}

/* Inputs no .hc-input -> solo color del texto */
.hc-card input, .hc-card select, .hc-card textarea {
  color: var(--card-fg) !important;
}
.hc-card input::placeholder, .hc-card textarea::placeholder {
  color: color-mix(in oklab, var(--muted-fg) 80%, transparent);
}

/* Botones/links neutros dentro de cards -> solo color (mantiene tus fondos/bordes) */
.hc-card button,
.hc-card a { color: var(--card-fg) !important; }
.hc-card button * { color: inherit !important; }

/* Disabled legible */
.hc-card button:disabled,
.hc-card button:disabled * { color: var(--muted-fg) !important; }

/* === Texto legible en islas claras dentro de tarjetas (modo oscuro) === */
@layer utilities {
  /* Cualquier bloque con fondo claro dentro de .hc-card en oscuro -> texto oscuro */
  .dark .hc-card :where(
    .bg-white, .bg-gray-50, .bg-slate-50, .bg-neutral-50, .bg-zinc-50,
    .bg-stone-50, .bg-gray-100, .bg-slate-100
  ) {
    color: #0f172a !important; /* slate-950/900 */
  }

  /* También fuerza el color de hijos típicos (títulos, spans, botones, links…) */
  .dark .hc-card :where(
    .bg-white, .bg-gray-50, .bg-slate-50, .bg-neutral-50, .bg-zinc-50,
    .bg-stone-50, .bg-gray-100, .bg-slate-100
  ) :where(h1,h2,h3,h4,strong,p,small,span,div,label,li,button,a) {
    color: #0f172a !important;
  }

  /* Si alguien dejó utilidades de texto claro, las anulamos en esas islas */
  .dark .hc-card :where(
    .bg-white, .bg-gray-50, .bg-slate-50, .bg-neutral-50, .bg-zinc-50,
    .bg-stone-50, .bg-gray-100, .bg-slate-100
  ) :where(.text-white, .text-slate-200, .text-slate-300, .text-gray-200, .text-gray-300) {
    color: #0f172a !important;
  }

  /* Botones deshabilitados sobre fondo claro: que el texto siga siendo legible */
  .dark .hc-card :where(
    .bg-white, .bg-gray-50, .bg-slate-50, .bg-neutral-50, .bg-zinc-50,
    .bg-stone-50, .bg-gray-100, .bg-slate-100
  ) :where(button:disabled, button:disabled *) {
    color: #334155 !important; /* slate-700 para buen contraste */
  }
}

/* === Texto legible en islas claras dentro de tarjetas (modo oscuro) === */
@layer utilities {
  /* Superficies claras comunes de Tailwind dentro de .hc-card */
  .dark .hc-card :is(
    .bg-white, .bg-white\/95, .bg-white\/90, .bg-white\/80,
    .bg-gray-50, .bg-gray-100, .bg-gray-200,
    .bg-slate-50, .bg-slate-100, .bg-slate-200,
    .bg-neutral-50, .bg-neutral-100,
    .bg-zinc-50, .bg-zinc-100,
    .bg-stone-50, .bg-stone-100
  ) {
    color: #0f172a !important; /* texto oscuro sobre fondo claro */
  }

  /* Asegura también el color en hijos típicos */
  .dark .hc-card :is(
    .bg-white, .bg-white\/95, .bg-white\/90, .bg-white\/80,
    .bg-gray-50, .bg-gray-100, .bg-gray-200,
    .bg-slate-50, .bg-slate-100, .bg-slate-200,
    .bg-neutral-50, .bg-neutral-100,
    .bg-zinc-50, .bg-zinc-100,
    .bg-stone-50, .bg-stone-100
  ) :is(h1,h2,h3,h4,strong,span,p,small,label,div,li,button,a) {
    color: #0f172a !important;
  }

  /* Placeholders en inputs sobre superficies claras */
  .dark .hc-card :is(
    .bg-white, .bg-gray-50, .bg-gray-100, .bg-slate-50, .bg-slate-100
  ) :is(input,textarea)::placeholder {
    color: #475569 !important; /* slate-600 */
  }

  /* Botones deshabilitados sobre claro: gris legible */
  .dark .hc-card :is(
    .bg-white, .bg-gray-50, .bg-gray-100,
    .bg-slate-50, .bg-slate-100,
    .bg-neutral-50, .bg-neutral-100
  ) :is(button:disabled, button:disabled *) {
    color: #334155 !important; /* slate-700 */
  }
}

/* === Texto legible en TODA la página para superficies claras (modo oscuro) === */
@layer utilities {
  /* Superficies claras habituales (neutros y pasteles) */
  .dark .hc-page :is(
    /* neutros */
    .bg-white, .bg-white\/95, .bg-white\/90, .bg-white\/80,
    .bg-slate-50, .bg-slate-100,
    .bg-gray-50, .bg-gray-100,
    .bg-neutral-50, .bg-zinc-50, .bg-stone-50,
    /* pasteles de estado/acento */
    .bg-emerald-50, .bg-green-50, .bg-lime-50, .bg-teal-50, .bg-cyan-50, .bg-sky-50,
    .bg-blue-50, .bg-indigo-50, .bg-violet-50, .bg-purple-50,
    .bg-yellow-50, .bg-amber-50, .bg-orange-50,
    .bg-rose-50, .bg-red-50, .bg-pink-50, .bg-fuchsia-50
  ) {
    color: #0f172a !important;   /* texto oscuro sobre fondo claro */
  }

  /* Asegura también el color en hijos típicos dentro de esas superficies */
  .dark .hc-page :is(
    .bg-white, .bg-white\/95, .bg-white\/90, .bg-white\/80,
    .bg-slate-50, .bg-slate-100,
    .bg-gray-50, .bg-gray-100,
    .bg-neutral-50, .bg-zinc-50, .bg-stone-50,
    .bg-emerald-50, .bg-green-50, .bg-lime-50, .bg-teal-50, .bg-cyan-50, .bg-sky-50,
    .bg-blue-50, .bg-indigo-50, .bg-violet-50, .bg-purple-50,
    .bg-yellow-50, .bg-amber-50, .bg-orange-50,
    .bg-rose-50, .bg-red-50, .bg-pink-50, .bg-fuchsia-50
  ) :is(h1,h2,h3,h4,strong,span,p,small,label,div,li,button,a) {
    color: #0f172a !important;
  }

  /* Placeholders legibles si hay inputs dentro de esas superficies claras */
  .dark .hc-page :is(
    .bg-white, .bg-slate-50, .bg-gray-50, .bg-neutral-50
  ) :is(input,textarea)::placeholder {
    color: #475569 !important; /* slate-600 */
  }

  /* Botones deshabilitados sobre claro: gris legible */
  .dark .hc-page :is(
    .bg-white, .bg-slate-50, .bg-gray-50,
    .bg-emerald-50, .bg-green-50, .bg-blue-50, .bg-amber-50
  ) :is(button:disabled, button:disabled *) {
    color: #334155 !important; /* slate-700 */
  }
}

/* === Fix específico: texto oscuro sobre gradientes claros de Mantenimiento (modo oscuro) === */
@layer utilities {
  /* Detecta superficies con gradiente claro (emerald/green 50–100) y fuerza texto oscuro */
  .dark .hc-page :is(
    .from-emerald-50, .to-emerald-50, .from-green-50, .to-green-50,
    .from-emerald-100, .to-emerald-100, .from-green-100, .to-green-100
  ) {
    color: #0f172a !important; /* slate-900 */
  }

  /* Asegura también hijos típicos dentro de esa banda */
  .dark .hc-page :is(
    .from-emerald-50, .to-emerald-50, .from-green-50, .to-green-50,
    .from-emerald-100, .to-emerald-100, .from-green-100, .to-green-100
  ) :is(h1,h2,h3,strong,span,p,small,label,div,li,button,a) {
    color: #0f172a !important;
  }
}

/* ===== util extra para textos secundarios en auth ===== */
@layer components {
  .hc-muted { color: color-mix(in oklab, var(--page-text) 55%, transparent); }
}
